<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sugarlump.love AR</title>
    <link rel="preload" href="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js" as="script" crossorigin="anonymous">
    <link rel="preload" href="images/Video Poster_1.jpg" as="image">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=0-0000000000"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '0-0000000000');
</script>
 
<style>
        /* Basic styling for the card and container */
        body { margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; min-height: 100vh; background-color: #f0f0f0; }
        .card {
            position: relative;
            width: 100%; /* Adjust as needed, e.g., max-width: 500px; for larger screens */
            max-width: 500px; /* Example: constrain width on larger screens */
            text-align: center;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px; /* Space below the card */
            overflow: hidden; /* Important for absolute positioning children */
            /* Ensure fixed height for the container, as children are absolute */
            height: 200px; /* This matches your model-viewer and video height */
        }

        /* Model Viewer and Video Overlay Base Styles */
        model-viewer, #video-overlay-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; /* Use 100% to fill parent .card */
            object-fit: cover; /* Ensures video covers the area without distortion */
            margin: 0;
        }

        /* Z-index for layering */
        model-viewer { z-index: 1; }
        #video-overlay-container { z-index: 2; display: flex; justify-content: center; align-items: center; } /* Flex for centering video/button */
        #video-overlay {
            width: 100%; /* Video takes full width of its container */
            height: 100%; /* Video takes full height of its container */
            object-fit: cover; /* Ensure video covers the space */
            display: none; /* Initially hidden, JS will make it block */
        }
        #play-pause-button {
            position: absolute; /* Relative to #video-overlay-container */
            z-index: 3; /* Above video */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 50%;
            padding: 10px 15px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            display: none; /* Initially hidden */
        }

        /* AR Button Styling */
        #ar-button-container {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-top: 230px; /* Adjust based on .card height + desired gap */
        }
        #ar-button {
            background-color: #ffffff;
            border-radius: 8px;
            border: 2px solid #59cbe8;
            height: 60px;
            min-width: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            cursor: pointer;
            text-decoration: none; /* If you make it an <a> tag */
        }
        #ar-button img {
            height: 4em;
            width: auto;
            margin-right: 5px;
        }
        #ar-button span {
            font-size: 32px;
            color: #000099;
            font-family: 'Chalet LondonNineteenEighty Regular', sans-serif; /* Ensure this font is loaded or a fallback is provided */
            white-space: nowrap; /* Prevent text wrapping */
        }
    </style>
</head>
<body>

<div class="card">
    <model-viewer
        id="reveal"
        src="Models/entire_family_sync.glb?sound=Sound/tercek_sweet_neighbor_mtrack2.mp3"
        shadow-intensity="1"
        ar ar-modes="scene-viewer webxr quick-look"
        ar-scale="auto" ar-preferred ar-placement="floor"
        camera-controls
        camera-orbit="0deg 90deg 100%"
        loading="lazy" poster="images/Video Poster_1.jpg"
        alt="Sugarlump Demo"
        ios-src="Models/ENTIRE_FAMILY_SYNC.usdz"
        interaction-prompt="none"
        autoplay="false"
        reveal="auto"
    >
        </model-viewer>

    <div id="video-overlay-container">
        <video id="video-overlay"
               autoplay muted playsinline preload="auto" loop src="Video/Sugarlump demo_4a.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <button id="play-pause-button"> ▶ </button>
    </div>
</div>

<div id="ar-button-container">
    <button id="ar-button">
        <img src="images/Heart button.png" alt="Custom Icon">
        <span><strong>push here</strong></span>
    </button>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const video = document.getElementById('video-overlay');
    const playPauseButton = document.getElementById('play-pause-button');
    const arButton = document.getElementById('ar-button');
    const modelViewer = document.getElementById('reveal');

    // Function to toggle video play/pause
    function toggleVideo() {
        if (video.paused || video.ended) {
            video.play();
            video.muted = false; // Enable audio playback after user interaction
            playPauseButton.innerHTML = "❚❚"; // Change to pause icon
            playPauseButton.style.display = "none"; // Hide button once playing
            modelViewer.pause(); // Pause model-viewer animation when video plays
        } else {
            video.pause();
            playPauseButton.innerHTML = "▶"; // Change to play icon
            playPauseButton.style.display = "block"; // Show button when paused
            modelViewer.play(); // Play model-viewer animation when video pauses
        }
    }

    // Listener for when the video has enough data to play the first frame
    // This makes the video visible as soon as possible.
    video.addEventListener('loadeddata', function() {
        video.style.display = 'block';

        // Initial state of play/pause button based on autoplay
        if (!video.paused && !video.ended) {
            playPauseButton.style.display = "none";
        } else {
            playPauseButton.style.display = "block";
            playPauseButton.innerHTML = "▶";
        }
    });

    // Handle user interaction with video and button
    video.addEventListener('click', toggleVideo);
    playPauseButton.addEventListener('click', toggleVideo);

    // Update button state on video play/pause events
    video.addEventListener('play', () => {
        playPauseButton.style.display = "none";
    });
    video.addEventListener('pause', () => {
        playPauseButton.style.display = "block";
    });

    // --- AR Functionality ---
    function launchAR() {
        // Pause video and hide controls when entering AR
        if (!video.paused) {
            video.pause();
        }
        video.style.display = 'none';
        playPauseButton.style.display = 'none';

        if (modelViewer.canActivateAR) {
            modelViewer.activateAR();
        } else {
            alert("AR is not available on this device.");
            // If AR fails, bring back video and its button (paused)
            video.style.display = 'block';
            playPauseButton.style.display = 'block';
        }
    }

    arButton.addEventListener('click', launchAR);

    // Listener for when model-viewer enters/exits AR
    modelViewer.addEventListener('ar-status', (event) => {
        if (event.detail.status === 'not-presenting') {
            // User exited AR. Re-display video and button.
            video.style.display = 'block';
            if (video.paused) { // Only show play button if video is currently paused
                 playPauseButton.style.display = 'block';
            }
            // Optionally, resume model-viewer animation if video is paused
            modelViewer.play();
        } else if (event.detail.status === 'ar' || event.detail.status === 'scene-viewer') {
            // User entered AR. Video and button are already hidden from launchAR.
            // No further action needed here for display properties.
        }
    });

    // Fallback if video is already loaded/playing before DOMContentLoaded
    // (e.g., from cache or very fast network)
    if (video.readyState >= 2) { // HTMLMediaElement.HAVE_CURRENT_DATA
        video.style.display = 'block';
        if (!video.paused && !video.ended) {
            playPauseButton.style.display = 'none';
        } else {
            playPauseButton.style.display = 'block';
            playPauseButton.innerHTML = "▶";
        }
    } else {
        // Ensure video is initially hidden if not ready, play button shown
        video.style.display = 'none';
        playPauseButton.style.display = 'block';
        playPauseButton.innerHTML = "▶";
    }

    // Ensure model-viewer's poster is visible while it loads
    // You could also add a custom loading spinner if 'poster' isn't enough
    // modelViewer.addEventListener('load', () => {
    //     // Model is loaded, optionally hide loading spinner if you added one
    // });
});
</script>


  <div class="card"> 
     <h1 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #000099;"> The joy of sharing kindness with friends + neighbors = sugarlump.love</p></h1></b>
     <img class="marginauto" src="images/erin_video_scenes-34.png" alt="Logo" style="width: 300px; height: auto">
     <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>about:</b><a href="https://sugarlump.love/about" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"> creativity + kindness</a></b></h2></p>
     <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>rewards:</b><a href="https://sugarlump.love/" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"><b> the kindness project</b></b></h2></a></p></a></h2>
     <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>join:</b><a href="https://sugarlump.love/the-club" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"> sugarlump kindness club</a></b></b></p></h2>
     <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>shop:</b><a href="https://sugarlump.love/shop" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"> creative kindness kits</a></b></b></p></h2> 
     <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>brag tags:</b><a href="https://www.schoollife.com/bragtags-intro" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"> accomplishment, recognition, confidence</a></b></b></p></h2>  
     <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>sponsors:</b><a href="https://sugarlump.love/contact" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"><b> get involved</b></b></h2></a></p></a></h2> 
     <br>
   <h1 style="text-align: center;" markdown="1"><p style="font-family:DaisyByhapppyal-Regular; font-weight: bold; color: #000099;"><em> THIS KINDNESS PROJECT SPONSORED BY</em></p></h1></b>
   <img class="marginauto" src="images/erin_video_scenes-37.png" alt="Logo" style="width: 300px; height: auto">
  </div>
   
   <div class="centerImage">
  <button onclick="window.open('https://www.tercekrealestate.com/', '_blank')" type="button" id="SponsorButton" style="z-index: 9; background-color: #ffffff; border-radius: 8px; border: 2px solid #59cbe8; height: 35px; width: auto; color: #000099; font-family: 'Chalet LondonNineteenEighty Regular', sans-serif; font-size: 20px;">
    <strong>&nbsp; visit &nbsp;</strong>
  </button>
  </div>

   <div class="card">
    <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #000099;">Experience 4D Augmented Reality On Your Phone</p></h2>
    <img alt="AR Instructions" src="images/erin_video_scenes-41.png" img class="marginauto" style="max-width: 100%; max-height: 350px">
    <h3 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #000099;"><em> If AR button does not appear on mobile device, use another browser.</em></p></h3></b>
   </div>
  
    <div class="card">
    <h4 style="text-align: center;" markdown="1"><a href="https://avertek.net/" target="_blank" rel="noopener noreferrer"><p style="font-family:Chalet LondonNineteenEighty Regular; color:##59cbe8;"> Contact AVERtek to learn more about AR marketing.</p></a></h4></b>
    </div>


</div>
</body>
</html>
